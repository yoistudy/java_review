Ch08. 예외처리
===
## 예외처리(exception handle)

#### 프로그램 오류

###### 에러 - 프로그램 실행 중 복구할 수 없는 심각한 문제가 발생한 경우
######  예외 - 프로그램 실행 중 정상적인 명령의 흐름을 방해하는 경우


#### 예외처리란

> 프로그램 실행 시 발생할 수 있는 예외를 catch할 코드를 작성하는 것

> 프로그램의 정상적인 명령 흐름을 유지하기 위한 것

#### 캐치 혹은 명시하기의 요건(The Catch or Specify Requirement)

유효한 자바 프로그래밍 코드는 "캐치 혹은 명시하기의 요건"을 반드시 지켜야한다. 즉 예외를 발생시킬 수 도 있는 코드는 반드시 아래중 하나가 포함 되어있어야 한다. 이는 checked exception으로 강제된다

- 예외를 캐치하는 try문

  try문에는 반드시 예외를 처리할 수 있는 (해당 예외 타입)핸들러를 사용해야 한다

- 예외를 던질(throw) 수 있다고 명시한 메소드

  메소드에는 반드시 throws clause를 사용하여 예외 리스트들을 명시한다

"캐치 혹은 명시하기의 요건"을 지키지 않은 코드는 컴파일되지 않음

## 예외의 세가지 종류
모든 예외가 "캐치 혹은 명시하기의 요건"에 적용되지는 않는다. 예외의 세가지 종류 중 한 가지 종류만 적용됨

#### checked exception

- Error와 RuntimeException 그리고 그 서브클래스들을 제외한 모든 예외

- 잘 작성된 애플리케이션이라면 예상하여 복구해야할 수 있는 예외 상황

- "캐치 혹은 명시하기의 요건"이 적용된다

#### error

- Error와 그 서브클래스들

- 애플리케이션 외부의 예외적 상황

- 대게 예상하고 그로부터 복구할 수 없는 예외

- "캐치 혹은 명시하기의 요건"이 적용 안됨

#### runtime exception

- RuntimeException과 그 서브클래스들

- 애플리케이션 내부의 예외적 상황

- 대부분 잘못된 로직이나 잘못된 API 사용과 같은 프로그래밍 버그들

- "캐치 혹은 명시하기의 요건"이 적용 안됨

Error와 RuntimeException을 unchecked exception이라고도 한다

## 예외 캐치와 핸들링

#### 예외 핸들링 요소

- try, catch, finally

- try-with-resources (Java SE 7에서 추가)

#### try 블럭

- 예외 핸들러를 생성의 첫 단계는 에외를 throw할 수도 있는 코드들을 try 블럭으로 감싸는 것

- try 블럭으로 감싸는 범위를 경우에 따라 조정

```java
try {

   // 에외를 throw할 수도 있는 코드

}
```

#### catch 블럭

- 예외를 캐치하기 위해 catch 블럭이 반드시 try 블럭 바로 다음에 뒤따라야 함

- 하나 이상의 catch 블럭을 사용 할 수 있음

- 아규먼트로 캐치할 예외 타입을 지정하며, `Throwable` 클래스로부터 상속받은 타입이여야 함

- 코드의 중복을 줄이기 위해 `|`로 구분하여 예외타입 아규먼트를 하나 이상 사용할 수 있음 (Java SE 7에서 추가)

  이때 생성되는 예외인스턴스변수는 묵시적으로 final이 됨

```java
try {

  // 에외를 throw할 수도 있는 코드

} catch (예외타입1 예외인스턴스변수) {

  // 예외 처리 코드

} catch (예외타입2 | 예외타입3 예외인스턴스변수) { // 하나의 catch 블럭에 하나 이상의 예외타입 사용

  // 예외인스턴스변수는 final
  // 예외 처리 코드

}
```

#### finally 블럭

- finally 블럭은 try 블럭을 빠져나오면 반드시 실행 됨

- 예외가 발생했을 때도 실행 됨

- 클린업 코드(자원해제에 관한 코드)를 실행하지 않고 건너뛰는 상황을 피할 수 있게 해줌

  finally 블럭에 클린업 코드를 넣는 것은 자원 누수를 막는 언제나 좋은 관행

참고 : JVM이 try나 catch 블럭에을 실행하고 있을 때 종료되면 finally 블럭은 실행되지 않음

```java
finally {

    // 반드시 실행 되어야할 코드
    // try 블럭에서 사용한 자원이 해제되지 않았으면 해제하는 코드

}
```
## 예외처리구문 try-catch

## try-catch문에서의 흐름

## 예외 발생시키기

## 예외 클래스의 계층구조

## 예외의 발생과 catch블럭

## finally 블럭

## 메서드의 예외 선언하기

## 예외 되던지기 (exception re-throwing)

## 사용자 정의 예외 만들기

## 캐치와 명시하기 우회

checked exception에 강제되는 "캐치 혹은 명시하기의 요건"이 예외처리 매커니즘에서 심각한 결함이라고 생각하고 checked excption에 unchecked excption을 사용하여 우회하할 수 도 있다 ..

참고 리소스
---
- [The Java™ Tutorials](https://docs.oracle.com/javase/tutorial/essential/exceptions/index.html)
- [정상혁님 블로그](http://egloos.zum.com/benelog/v/1901121)
